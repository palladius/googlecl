<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>__init__.py</title>
  <link rel="stylesheet" href="../../../pycco.css">
</head>
<body>
<div id="background"></div>
<div id='container'>
  <div class='section'>
    <div class='docs'><h1>__init__.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <p>Copyright (C) 2010 Google Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<pre><code> http://www.apache.org/licenses/LICENSE-2.0
</code></pre>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="kn">import</span> <span class="nn">ConfigParser</span>
<span class="kn">import</span> <span class="nn">googlecl</span>
<span class="kn">import</span> <span class="nn">parser</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>Set the most basic options in the config file.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">_create_basic_options</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="kn">import</span> <span class="nn">googlecl.docs</span>
  <span class="kn">import</span> <span class="nn">googlecl.contacts</span>
  <span class="kn">import</span> <span class="nn">googlecl.calendar</span>
  <span class="kn">import</span> <span class="nn">googlecl.youtube</span>
  <span class="kn">import</span> <span class="nn">getpass</span>
  <span class="kn">import</span> <span class="nn">socket</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>These may be useful to define at the module level, but for now,
keep them here.
REMEMBER: updating these means you need to update the CONFIG readme.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="n">default_hostid</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;@&#39;</span> <span class="o">+</span>  <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>
  <span class="n">_youtube</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;max_results&#39;</span><span class="p">:</span> <span class="s">&#39;50&#39;</span><span class="p">}</span>
  <span class="n">_contacts</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="s">&#39;name,email&#39;</span><span class="p">}</span>
  <span class="n">_calendar</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="s">&#39;title,when&#39;</span><span class="p">}</span>
  <span class="n">_general</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;max_retries&#39;</span><span class="p">:</span> <span class="s">&#39;2&#39;</span><span class="p">,</span>
              <span class="s">&#39;retry_delay&#39;</span><span class="p">:</span> <span class="s">&#39;0.5&#39;</span><span class="p">,</span>
              <span class="s">&#39;regex&#39;</span><span class="p">:</span> <span class="s">&#39;True&#39;</span><span class="p">,</span>
              <span class="s">&#39;url_field&#39;</span><span class="p">:</span> <span class="s">&#39;site&#39;</span><span class="p">,</span>
              <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="s">&#39;title,url-site&#39;</span><span class="p">,</span>
              <span class="s">&#39;missing_field_value&#39;</span><span class="p">:</span> <span class="s">&#39;N/A&#39;</span><span class="p">,</span>
              <span class="s">&#39;date_print_format&#39;</span><span class="p">:</span> <span class="s">&#39;%b </span><span class="si">%d</span><span class="s"> %H:%M&#39;</span><span class="p">,</span>
              <span class="s">&#39;cap_results&#39;</span><span class="p">:</span> <span class="s">&#39;False&#39;</span><span class="p">,</span>
              <span class="s">&#39;hostid&#39;</span><span class="p">:</span> <span class="n">default_hostid</span><span class="p">}</span>
  <span class="n">_docs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;document_format&#39;</span><span class="p">:</span> <span class="s">&#39;txt&#39;</span><span class="p">,</span>
           <span class="s">&#39;spreadsheet_format&#39;</span><span class="p">:</span> <span class="s">&#39;xls&#39;</span><span class="p">,</span>
           <span class="s">&#39;presentation_format&#39;</span><span class="p">:</span> <span class="s">&#39;ppt&#39;</span><span class="p">,</span>
           <span class="s">&#39;drawing_format&#39;</span><span class="p">:</span> <span class="s">&#39;png&#39;</span><span class="p">,</span>
           <span class="s">&#39;format&#39;</span><span class="p">:</span> <span class="s">&#39;txt&#39;</span><span class="p">,</span>
           <span class="s">&#39;spreadsheet_editor&#39;</span><span class="p">:</span> <span class="s">&#39;openoffice.org&#39;</span><span class="p">,</span>
           <span class="s">&#39;presentation_editor&#39;</span><span class="p">:</span> <span class="s">&#39;openoffice.org&#39;</span><span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span><span class="n">googlecl</span><span class="o">.</span><span class="n">docs</span><span class="o">.</span><span class="n">SECTION_HEADER</span><span class="p">:</span> <span class="n">_docs</span><span class="p">,</span>
          <span class="n">googlecl</span><span class="o">.</span><span class="n">contacts</span><span class="o">.</span><span class="n">SECTION_HEADER</span><span class="p">:</span> <span class="n">_contacts</span><span class="p">,</span>
          <span class="n">googlecl</span><span class="o">.</span><span class="n">calendar</span><span class="o">.</span><span class="n">SECTION_HEADER</span><span class="p">:</span> <span class="n">_calendar</span><span class="p">,</span>
          <span class="n">googlecl</span><span class="o">.</span><span class="n">youtube</span><span class="o">.</span><span class="n">SECTION_HEADER</span><span class="p">:</span> <span class="n">_youtube</span><span class="p">,</span>
          <span class="s">&#39;GENERAL&#39;</span><span class="p">:</span> <span class="n">_general</span><span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>Get the full path to the configuration file.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">get_config_path</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&#39;config&#39;</span><span class="p">,</span>
                    <span class="n">default_directories</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">create_missing_dir</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>See googlecl.get_xdg_path()</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">return</span> <span class="n">googlecl</span><span class="o">.</span><span class="n">get_xdg_path</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;CONFIG&#39;</span><span class="p">,</span> <span class="n">default_directories</span><span class="p">,</span>
                               <span class="n">create_missing_dir</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>Loads configuration file.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">load_configuration</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Args:
  path: Path to the configuration file. Default None for the default location.</p>
<p>Returns:
  Configuration parser.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">get_config_path</span><span class="p">(</span><span class="n">create_missing_dir</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
      <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;Could not create config directory!&#39;</span><span class="p">)</span>
      <span class="k">return</span> <span class="bp">False</span>
  <span class="n">config</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">(</span><span class="n">ConfigParser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">)</span>
  <span class="n">config</span><span class="o">.</span><span class="n">associate</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
  <span class="n">made_changes</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">ensure_basic_options</span><span class="p">(</span><span class="n">_create_basic_options</span><span class="p">())</span>
  <span class="k">if</span> <span class="n">made_changes</span><span class="p">:</span>
    <span class="n">config</span><span class="o">.</span><span class="n">write_out_parser</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>Set the encoding again, now that the config file is loaded.
(the config file may have a default encoding setting)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="n">googlecl</span><span class="o">.</span><span class="n">TERMINAL_ENCODING</span> <span class="o">=</span> <span class="n">googlecl</span><span class="o">.</span><span class="n">determine_terminal_encoding</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">config</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
